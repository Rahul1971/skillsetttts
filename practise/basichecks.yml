- name: "Install tomcat"
  hosts: all
  connection: local
  tasks:

    - name: " check tomcat status"
      shell: "rpm -qa |grep -i tomcat"
      register: x
      ignore_errors: yes
      #failed_when: x.rc != 0 and x.stdout == ""
      #changed_when: false


    - name: "Install tomcat"
      dnf:
       name: "tomcat"
       state: installed

    - name: "Start tomcat service"
      service:
        name: tomcat
        state: started

    - name: " check tomcat status"
      shell: "rpm -qa |grep -i tomcat"
      register: y


       #"dnf module install tomcat:1.24 -y"

   # - name: "update yum"
   #   dnf:
   #     name: "*"
   #     state: latest


      #dnf:
       # name: nginix
       # state: installed
        #when: x.stdout != 0

    #- name: "Start Nginix service"
    #  service:
    #    name: nginix
    #    state: started
