- name: "Install Nginx"
  hosts: all
  connection: local
  tasks:

    - name: " check nginx status"
      shell: "rpm -qa |grep -i nginx"
      register: x
      ignore_errors: yes
      #failed_when: x.rc != 0 and x.stdout == ""
      #changed_when: false

    - name: "Print the status"
      debug:
        msg: "status is {{x.stdout}}"

    - name: "Install nginx"
      dnf:
       name: "nginx"
       state: latest

    - name: "Start nginx service"
      service:
        name: nginx
        state: started

    - name: " check nginx status"
      shell: "rpm -qa |grep -i nginx"
      register: y

    - name: "Print the status"
      debug:
        msg: "status is {{y.stdout}}"

       #"dnf module install nginx:1.24 -y"

   # - name: "update yum"
   #   dnf:
   #     name: "*"
   #     state: latest


      #dnf:
       # name: nginix
       # state: installed
        #when: x.stdout != 0

    #- name: "Start Nginix service"
    #  service:
    #    name: nginix
    #    state: started
